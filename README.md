მიზანი:

ჩვენ ვიყენებთ Mocking ტექნიკას როდესაც ვქმნით ტესტებს კოდისთვის. Mocking ტექნიკა ითვალისწინებს კოდიდან სამიზნე ნაწილის იზოლაციას. 
ამ ნაწილს შეიძლება ქონდეს დამოკიდებულება (Dependency) კოდის სხვა ნაწილებთან. ჩვენ შეგვიძლია შევქმნათ ამ დამოკიდებულების Mock ვერსია.

რა თქმა უნდა, რეალურ გარემოზე (production) Mock ვერსია ჩანაცვლდება რეალური ვერსიით. ტესტირების დროს კი Mock-ი მოგვცემს სამიზნე გასატესტი კოდის
მარტივად იზოლაციის საშუალებას.

------------------------

რატომ Mock-ი?

Mock-ის საშუალებით ჩვენ შევძლებთ ტესტირების დაჩქარებას. (მაგალითად რეალურ გარემოში შეიძლება გარკვეულ ფუნქციონალს ქონდეს შესრულების მძიმე ალგორითმი,
ან სულაც გარე რესურსთან (DB, Web service...) წვდომა იყოს რთული ან/და არასაჭირო იუნით ტესტისთვის.)

ასევე ჩვენ შეიძლება ვიძახებდეთ რაიმე სერვისს, რომელიც ჯერ არ არის მზად. Mock-ის საშუალებით არ დაველოდებით მის დასრულებას და 
შევძლებთ პარალელურ დეველოპმენტს.

------------------------

ტერმინები:

Test Double არის ზოგადი ტერმინი, როდესაც ჩვენ ვანაცვლებთ რეალური გარემოსთვის განსაზღვრულ იმპლემენტაციას სატესტო მიზნებისთვის.
Test Double მოიცავს ოთხ ნაწილს: Fakes, Dummies, Stubs და Mocks.

Fakes: სამუშაო იმპლემენტაცია რომელის არ არის შესაბამისი production გარემოსთვის. (მაგალითად EF Core-ში in-memory provider)

Dummies: ისეთი ობიექტები, რომლების უბრალოდ პარამეტრების მოთხოვნების დასაკმაყოფილებლად გამოიყენება.

Stubs: აწვდის პასუხებს გამოძახებებზე, ახდენს ფროფერთების ან მეთოდის მნიშვნელობების დაბრუნებას.

Mocks: გამოძახებების ვერიფიკაცია, ფროფერთების და მეთოდების გამოძახებები.

თუმცა ამ ნაწილების დიფერენცირება მკაცრად არც არის ხოლმე განსაზღვრული და უმეტესად Dummies, Stubs და Mocks ერთად Mocks ეძახიან.

------------------------

სამაგალითი პროექტი:

Art Gallery არის პატარა სამაგალითო პროექტი. პროექტში არის გამოფენის მოდელი და სტუმრის სტატუსი (მოსწავლე, სტუდენტი, პენსიონერი და ა.შ.).
სტუმრის სტატუსის მიხედვით გამოფენაზე არის სხვადასხვა პროცენტული ფასდაკლება.

ExhibitionManager კლასში ხდება გამოფენის ფასის გამოთვლა. პროექტში არის IValidator ინტერფეისი, რომელიც ახდენს ობიექტის ვალიდაციას.
ობიექტის ვალიდაციის აღწერა მოცემული არ არის და ამ შემთხვევაში არც არის საინტერესო. ის შეიძლება მოიცავდეს ბაზაში სხვადასხვა შემოწმებას ან
სულაც რაიმე სერვისის გამოძახებას. Mock-ის საშუალებით ხდება ამ ვალიდაციის დამოკიდებულების მოქირება. მოქში წინასწარ განვსაზღვრავთ თუ
რა დაბრუნდეს ვალიდაციის მეთოდის გამოძახებისას ჩვენთვის სასურველი პარამეტრის გადაცემის დროს.

მეთოდის მოქირებისას შეგვიძლია გამოვიყენოთ It კლასი. It კლასს აქვს რამდენიმე პირობითი მეთოდი მოქირების პარამეტრისთვის.
